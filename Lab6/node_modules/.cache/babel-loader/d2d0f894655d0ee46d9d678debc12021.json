{"ast":null,"code":"// const firebaseConfig = {\n//     apiKey: \"AIzaSyCKFsCChb9mlTV1v-NT_8FUSysj9kH3mtk\",\n//     authDomain: \"autorization-350818.firebaseapp.com\",\n//     projectId: \"autorization-350818\",\n//     storageBucket: \"autorization-350818.appspot.com\",\n//     messagingSenderId: \"490521543967\",\n//     appId: \"1:490521543967:web:df9c8a794de6a1a1275c2a\",\n//     measurementId: \"G-BEC80WQCVS\",\n//     databaseURL: \"https://autorization-350818-default-rtdb.europe-west1.firebasedatabase.app/\"\n// };\n// let auth\n// let database\n// export function initFirebase() {\n//     // Initialize Firebase\n//     firebase.initializeApp(firebaseConfig);\n//     auth = firebase.auth()\n//     database = firebase.database()\n// }\n// export function register(email, password) {\n//     auth.createUserWithEmailAndPassword(email, password)\n//         .then(function () {\n//             var user = auth.currentUser\n//             var database_ref = database.ref()\n//             var user_data = {\n//                 email: email,\n//                 list: objectt,\n//                 last_login: Date.now()\n//             }\n//             database_ref.child('users/' + user.uid).set(user_data)\n//             //   console.log(\"catch\")\n//             alert('User Created!!')\n//         })\n// }\n// export function login(email, password) {\n//     auth.signInWithEmailAndPassword(email, password)\n//         .then(function () {\n//             var user = auth.currentUser\n//             nickname.innerText = email;\n//             var database_ref = database.ref()\n//             var user_data = {\n//                 last_login: Date.now()\n//             }\n//             database_ref.child('users/' + user.uid).update(user_data)\n//             databaseref = database_ref;\n//             useruid = user.uid;\n//             alert('User Logged In!!')\n//         })\n//     userenter = true;\n// }\n// import { initializeApp } from \"firebase/app\";\n// import {\n//     // GoogleAuthProvider,\n//     getAuth,\n//     // signInWithPopup,\n//     signInWithEmailAndPassword,\n//     createUserWithEmailAndPassword,\n//     // sendPasswordResetEmail,\n//     // signOut,\n// } from \"firebase/auth\";\n// import {\n//     getFirestore,\n//     // query,\n//     // getDocs,\n//     // collection,\n//     // where,\n//     // addDoc,\n// } from \"firebase/firestore\";\n// const firebaseConfig = {\n//     apiKey: \"AIzaSyCKFsCChb9mlTV1v-NT_8FUSysj9kH3mtk\",\n//     authDomain: \"autorization-350818.firebaseapp.com\",\n//     projectId: \"autorization-350818\",\n//     storageBucket: \"autorization-350818.appspot.com\",\n//     messagingSenderId: \"490521543967\",\n//     appId: \"1:490521543967:web:df9c8a794de6a1a1275c2a\",\n//     measurementId: \"G-BEC80WQCVS\",\n//     databaseURL: \"https://autorization-350818-default-rtdb.europe-west1.firebasedatabase.app/\"\n// };\n// const app = initializeApp(firebaseConfig);\n// const auth = getAuth(app);\n// const db = getFirestore(app);\n// const logInWithEmailAndPassword = async (email, password, setData) => {\n//     signInWithEmailAndPassword(auth, email, password)\n//         .then(function () {\n//             var user = auth.currentUser\n//             var database_ref = db.ref()\n//             var user_data = {\n//                 last_login: Date.now()\n//             }\n//             database_ref.child('users/' + user.uid).update(user_data)\n//             setData({databaseref: database_ref, useruid: user.uid, userenter: true})\n//             alert('User Logged In!!')\n//             return true;\n//         })\n// };\n// const registerWithEmailAndPassword = async (email, password) => {\n//     createUserWithEmailAndPassword(auth, email, password).then(function () {\n//         var user = auth.currentUser\n//         var database_ref = db.ref()\n//         var user_data = {\n//             email: email,\n//             list: [],\n//             last_login: Date.now()\n//         }\n//         database_ref.child('users/' + user.uid).set(user_data)\n//         //   console.log(\"catch\")\n//         alert('User Created!!')\n//         return true;\n//     })\n// };\n// export {\n//     auth,\n//     db,\n//     logInWithEmailAndPassword,\n//     registerWithEmailAndPassword,\n// };\nimport { initializeApp } from \"firebase/app\";\nimport { GoogleAuthProvider, getAuth, signInWithPopup, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, signOut } from \"firebase/auth\";\nimport { ref, getDatabase, set, update, child, get } from 'firebase/database';\nimport { useState } from \"react\"; // import {\n//   getFirestore,\n//   query,\n//   getDocs,\n//   collection,\n//   where,\n//   addDoc,\n// } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCKFsCChb9mlTV1v-NT_8FUSysj9kH3mtk\",\n  authDomain: \"autorization-350818.firebaseapp.com\",\n  projectId: \"autorization-350818\",\n  storageBucket: \"autorization-350818.appspot.com\",\n  messagingSenderId: \"490521543967\",\n  appId: \"1:490521543967:web:df9c8a794de6a1a1275c2a\",\n  measurementId: \"G-BEC80WQCVS\",\n  databaseURL: \"https://autorization-350818-default-rtdb.europe-west1.firebasedatabase.app/\"\n};\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app); // const db = firebase.database();\n\nconst db = getDatabase();\nconst googleProvider = new GoogleAuthProvider();\nconst [userres, setuserres] = useState(null);\n\nconst logInWithEmailAndPassword = async (email, password, setUserData) => {\n  try {\n    const res = await signInWithEmailAndPassword(auth, email, password);\n    const dbRef = ref(db);\n    let prevUserData = await get(child(dbRef, `users/${res.user.uid}`));\n    if (!prevUserData.exists()) return false;\n    let user_data = { ...prevUserData.val(),\n      last_login: Date.now()\n    }; // ref('users/' + res.user.uid).update(user_data)\n    // Write the new post's data simultaneously in the posts list and the user's post list.\n\n    const updates = {};\n    setuserres(res);\n    updates['users/' + res.user.uid] = user_data;\n    update(ref(db), updates); // Firebase  .child('users/' + user.uid).update(user_data)\n\n    setUserData({\n      useruid: res.user.uid,\n      userenter: true\n    });\n    alert('User Logged In!!');\n    return true;\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n    return false;\n  }\n};\n\nconst GetData = async () => {\n  const dbRef = ref(db);\n  let prevUserData = await get(child(dbRef, `users/${useruid}`));\n  if (!prevUserData.exists()) return false;\n  console.log(prevUserData);\n};\n\n_c = GetData;\n\nconst registerWithEmailAndPassword = async (email, password) => {\n  try {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    var user_data = {\n      email: email,\n      list: JSON.stringify([]),\n      last_login: Date.now()\n    };\n    set(ref(db, 'users/' + user.uid), user_data); //         database_ref.child('users/' + user.uid).set(user_data)\n\n    alert('User Created!!');\n    return true;\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n    return false;\n  }\n};\n\nexport { auth, //   db,\nlogInWithEmailAndPassword, registerWithEmailAndPassword };\n\nvar _c;\n\n$RefreshReg$(_c, \"GetData\");","map":{"version":3,"names":["initializeApp","GoogleAuthProvider","getAuth","signInWithPopup","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","signOut","ref","getDatabase","set","update","child","get","useState","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","app","auth","db","googleProvider","userres","setuserres","logInWithEmailAndPassword","email","password","setUserData","res","dbRef","prevUserData","user","uid","exists","user_data","val","last_login","Date","now","updates","useruid","userenter","alert","err","console","error","message","GetData","log","registerWithEmailAndPassword","list","JSON","stringify"],"sources":["C:/Users/user/Desktop/musicplayerReact/musicplayer/src/utils/firebase.js"],"sourcesContent":["// const firebaseConfig = {\r\n//     apiKey: \"AIzaSyCKFsCChb9mlTV1v-NT_8FUSysj9kH3mtk\",\r\n//     authDomain: \"autorization-350818.firebaseapp.com\",\r\n//     projectId: \"autorization-350818\",\r\n//     storageBucket: \"autorization-350818.appspot.com\",\r\n//     messagingSenderId: \"490521543967\",\r\n//     appId: \"1:490521543967:web:df9c8a794de6a1a1275c2a\",\r\n//     measurementId: \"G-BEC80WQCVS\",\r\n//     databaseURL: \"https://autorization-350818-default-rtdb.europe-west1.firebasedatabase.app/\"\r\n// };\r\n\r\n// let auth\r\n// let database\r\n\r\n\r\n// export function initFirebase() {\r\n//     // Initialize Firebase\r\n//     firebase.initializeApp(firebaseConfig);\r\n\r\n//     auth = firebase.auth()\r\n//     database = firebase.database()\r\n// }\r\n\r\n\r\n// export function register(email, password) {\r\n//     auth.createUserWithEmailAndPassword(email, password)\r\n//         .then(function () {\r\n//             var user = auth.currentUser\r\n//             var database_ref = database.ref()\r\n\r\n//             var user_data = {\r\n//                 email: email,\r\n//                 list: objectt,\r\n//                 last_login: Date.now()\r\n//             }\r\n//             database_ref.child('users/' + user.uid).set(user_data)\r\n//             //   console.log(\"catch\")\r\n\r\n//             alert('User Created!!')\r\n//         })\r\n\r\n// }\r\n\r\n// export function login(email, password) {\r\n//     auth.signInWithEmailAndPassword(email, password)\r\n//         .then(function () {\r\n//             var user = auth.currentUser\r\n//             nickname.innerText = email;\r\n//             var database_ref = database.ref()\r\n//             var user_data = {\r\n//                 last_login: Date.now()\r\n//             }\r\n//             database_ref.child('users/' + user.uid).update(user_data)\r\n//             databaseref = database_ref;\r\n//             useruid = user.uid;\r\n//             alert('User Logged In!!')\r\n//         })\r\n//     userenter = true;\r\n\r\n// }\r\n\r\n\r\n\r\n// import { initializeApp } from \"firebase/app\";\r\n// import {\r\n//     // GoogleAuthProvider,\r\n//     getAuth,\r\n//     // signInWithPopup,\r\n//     signInWithEmailAndPassword,\r\n//     createUserWithEmailAndPassword,\r\n//     // sendPasswordResetEmail,\r\n//     // signOut,\r\n// } from \"firebase/auth\";\r\n// import {\r\n//     getFirestore,\r\n//     // query,\r\n//     // getDocs,\r\n//     // collection,\r\n//     // where,\r\n//     // addDoc,\r\n// } from \"firebase/firestore\";\r\n// const firebaseConfig = {\r\n//     apiKey: \"AIzaSyCKFsCChb9mlTV1v-NT_8FUSysj9kH3mtk\",\r\n//     authDomain: \"autorization-350818.firebaseapp.com\",\r\n//     projectId: \"autorization-350818\",\r\n//     storageBucket: \"autorization-350818.appspot.com\",\r\n//     messagingSenderId: \"490521543967\",\r\n//     appId: \"1:490521543967:web:df9c8a794de6a1a1275c2a\",\r\n//     measurementId: \"G-BEC80WQCVS\",\r\n//     databaseURL: \"https://autorization-350818-default-rtdb.europe-west1.firebasedatabase.app/\"\r\n// };\r\n// const app = initializeApp(firebaseConfig);\r\n// const auth = getAuth(app);\r\n// const db = getFirestore(app);\r\n\r\n// const logInWithEmailAndPassword = async (email, password, setData) => {\r\n//     signInWithEmailAndPassword(auth, email, password)\r\n//         .then(function () {\r\n//             var user = auth.currentUser\r\n//             var database_ref = db.ref()\r\n//             var user_data = {\r\n//                 last_login: Date.now()\r\n//             }\r\n//             database_ref.child('users/' + user.uid).update(user_data)\r\n//             setData({databaseref: database_ref, useruid: user.uid, userenter: true})\r\n//             alert('User Logged In!!')\r\n//             return true;\r\n//         })\r\n// };\r\n// const registerWithEmailAndPassword = async (email, password) => {\r\n//     createUserWithEmailAndPassword(auth, email, password).then(function () {\r\n//         var user = auth.currentUser\r\n//         var database_ref = db.ref()\r\n\r\n//         var user_data = {\r\n//             email: email,\r\n//             list: [],\r\n//             last_login: Date.now()\r\n//         }\r\n//         database_ref.child('users/' + user.uid).set(user_data)\r\n//         //   console.log(\"catch\")\r\n\r\n//         alert('User Created!!')\r\n//         return true;\r\n//     })\r\n// };\r\n\r\n// export {\r\n//     auth,\r\n//     db,\r\n//     logInWithEmailAndPassword,\r\n//     registerWithEmailAndPassword,\r\n// };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport { initializeApp } from \"firebase/app\";\r\nimport {\r\n  GoogleAuthProvider,\r\n  getAuth,\r\n  signInWithPopup,\r\n  signInWithEmailAndPassword,\r\n  createUserWithEmailAndPassword,\r\n  sendPasswordResetEmail,\r\n  signOut,\r\n} from \"firebase/auth\";\r\nimport { ref, getDatabase, set, update, child, get } from 'firebase/database'\r\nimport { useState } from \"react\";\r\n// import {\r\n//   getFirestore,\r\n//   query,\r\n//   getDocs,\r\n//   collection,\r\n//   where,\r\n//   addDoc,\r\n// } from \"firebase/firestore\";\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCKFsCChb9mlTV1v-NT_8FUSysj9kH3mtk\",\r\n  authDomain: \"autorization-350818.firebaseapp.com\",\r\n  projectId: \"autorization-350818\",\r\n  storageBucket: \"autorization-350818.appspot.com\",\r\n  messagingSenderId: \"490521543967\",\r\n  appId: \"1:490521543967:web:df9c8a794de6a1a1275c2a\",\r\n  measurementId: \"G-BEC80WQCVS\",\r\n  databaseURL: \"https://autorization-350818-default-rtdb.europe-west1.firebasedatabase.app/\"\r\n};\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\n// const db = firebase.database();\r\nconst db = getDatabase();\r\nconst googleProvider = new GoogleAuthProvider();\r\n\r\nconst [userres, setuserres]=useState(null)\r\n\r\nconst logInWithEmailAndPassword = async (email, password, setUserData) => {\r\n  try {\r\n    const res = await signInWithEmailAndPassword(auth, email, password);\r\n    const dbRef = ref(db);\r\n    let prevUserData = await get(child(dbRef, `users/${res.user.uid}`))\r\n    if (!prevUserData.exists())\r\n      return false;\r\n    let user_data = {\r\n      ...prevUserData.val(),\r\n      last_login: Date.now()\r\n    }\r\n    // ref('users/' + res.user.uid).update(user_data)\r\n\r\n    // Write the new post's data simultaneously in the posts list and the user's post list.\r\n    const updates = {};\r\n    setuserres(res)\r\n    updates['users/' + res.user.uid] = user_data;\r\n\r\n    update(ref(db), updates);\r\n\r\n    // Firebase  .child('users/' + user.uid).update(user_data)\r\n    setUserData({ useruid: res.user.uid, userenter: true })\r\n    alert('User Logged In!!')\r\n    return true;\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n    return false;\r\n  }\r\n};\r\n\r\nconst GetData = async () => {\r\n  const dbRef = ref(db);\r\n  let prevUserData = await get(child(dbRef, `users/${useruid}`))\r\n  if (!prevUserData.exists())\r\n    return false;\r\n  console.log(prevUserData);\r\n};\r\n\r\n\r\nconst registerWithEmailAndPassword = async (email, password) => {\r\n  try {\r\n    const res = await createUserWithEmailAndPassword(auth, email, password);\r\n    const user = res.user;\r\n    var user_data = {\r\n      email: email,\r\n      list: JSON.stringify([]),\r\n      last_login: Date.now()\r\n    }\r\n    set(ref(db, 'users/' + user.uid), user_data);\r\n    //         database_ref.child('users/' + user.uid).set(user_data)\r\n    alert('User Created!!')\r\n    return true;\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport {\r\n  auth,\r\n  //   db,\r\n  logInWithEmailAndPassword,\r\n  registerWithEmailAndPassword,\r\n};\r\n\r\n\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AASA,SAASA,aAAT,QAA8B,cAA9B;AACA,SACEC,kBADF,EAEEC,OAFF,EAGEC,eAHF,EAIEC,0BAJF,EAKEC,8BALF,EAMEC,sBANF,EAOEC,OAPF,QAQO,eARP;AASA,SAASC,GAAT,EAAcC,WAAd,EAA2BC,GAA3B,EAAgCC,MAAhC,EAAwCC,KAAxC,EAA+CC,GAA/C,QAA0D,mBAA1D;AACA,SAASC,QAAT,QAAyB,OAAzB,C,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG;EACrBC,MAAM,EAAE,yCADa;EAErBC,UAAU,EAAE,qCAFS;EAGrBC,SAAS,EAAE,qBAHU;EAIrBC,aAAa,EAAE,iCAJM;EAKrBC,iBAAiB,EAAE,cALE;EAMrBC,KAAK,EAAE,2CANc;EAOrBC,aAAa,EAAE,cAPM;EAQrBC,WAAW,EAAE;AARQ,CAAvB;AAUA,MAAMC,GAAG,GAAGxB,aAAa,CAACe,cAAD,CAAzB;AACA,MAAMU,IAAI,GAAGvB,OAAO,CAACsB,GAAD,CAApB,C,CACA;;AACA,MAAME,EAAE,GAAGjB,WAAW,EAAtB;AACA,MAAMkB,cAAc,GAAG,IAAI1B,kBAAJ,EAAvB;AAEA,MAAM,CAAC2B,OAAD,EAAUC,UAAV,IAAsBf,QAAQ,CAAC,IAAD,CAApC;;AAEA,MAAMgB,yBAAyB,GAAG,OAAOC,KAAP,EAAcC,QAAd,EAAwBC,WAAxB,KAAwC;EACxE,IAAI;IACF,MAAMC,GAAG,GAAG,MAAM9B,0BAA0B,CAACqB,IAAD,EAAOM,KAAP,EAAcC,QAAd,CAA5C;IACA,MAAMG,KAAK,GAAG3B,GAAG,CAACkB,EAAD,CAAjB;IACA,IAAIU,YAAY,GAAG,MAAMvB,GAAG,CAACD,KAAK,CAACuB,KAAD,EAAS,SAAQD,GAAG,CAACG,IAAJ,CAASC,GAAI,EAA9B,CAAN,CAA5B;IACA,IAAI,CAACF,YAAY,CAACG,MAAb,EAAL,EACE,OAAO,KAAP;IACF,IAAIC,SAAS,GAAG,EACd,GAAGJ,YAAY,CAACK,GAAb,EADW;MAEdC,UAAU,EAAEC,IAAI,CAACC,GAAL;IAFE,CAAhB,CANE,CAUF;IAEA;;IACA,MAAMC,OAAO,GAAG,EAAhB;IACAhB,UAAU,CAACK,GAAD,CAAV;IACAW,OAAO,CAAC,WAAWX,GAAG,CAACG,IAAJ,CAASC,GAArB,CAAP,GAAmCE,SAAnC;IAEA7B,MAAM,CAACH,GAAG,CAACkB,EAAD,CAAJ,EAAUmB,OAAV,CAAN,CAjBE,CAmBF;;IACAZ,WAAW,CAAC;MAAEa,OAAO,EAAEZ,GAAG,CAACG,IAAJ,CAASC,GAApB;MAAyBS,SAAS,EAAE;IAApC,CAAD,CAAX;IACAC,KAAK,CAAC,kBAAD,CAAL;IACA,OAAO,IAAP;EACD,CAvBD,CAuBE,OAAOC,GAAP,EAAY;IACZC,OAAO,CAACC,KAAR,CAAcF,GAAd;IACAD,KAAK,CAACC,GAAG,CAACG,OAAL,CAAL;IACA,OAAO,KAAP;EACD;AACF,CA7BD;;AA+BA,MAAMC,OAAO,GAAG,YAAY;EAC1B,MAAMlB,KAAK,GAAG3B,GAAG,CAACkB,EAAD,CAAjB;EACA,IAAIU,YAAY,GAAG,MAAMvB,GAAG,CAACD,KAAK,CAACuB,KAAD,EAAS,SAAQW,OAAQ,EAAzB,CAAN,CAA5B;EACA,IAAI,CAACV,YAAY,CAACG,MAAb,EAAL,EACE,OAAO,KAAP;EACFW,OAAO,CAACI,GAAR,CAAYlB,YAAZ;AACD,CAND;;KAAMiB,O;;AASN,MAAME,4BAA4B,GAAG,OAAOxB,KAAP,EAAcC,QAAd,KAA2B;EAC9D,IAAI;IACF,MAAME,GAAG,GAAG,MAAM7B,8BAA8B,CAACoB,IAAD,EAAOM,KAAP,EAAcC,QAAd,CAAhD;IACA,MAAMK,IAAI,GAAGH,GAAG,CAACG,IAAjB;IACA,IAAIG,SAAS,GAAG;MACdT,KAAK,EAAEA,KADO;MAEdyB,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,EAAf,CAFQ;MAGdhB,UAAU,EAAEC,IAAI,CAACC,GAAL;IAHE,CAAhB;IAKAlC,GAAG,CAACF,GAAG,CAACkB,EAAD,EAAK,WAAWW,IAAI,CAACC,GAArB,CAAJ,EAA+BE,SAA/B,CAAH,CARE,CASF;;IACAQ,KAAK,CAAC,gBAAD,CAAL;IACA,OAAO,IAAP;EACD,CAZD,CAYE,OAAOC,GAAP,EAAY;IACZC,OAAO,CAACC,KAAR,CAAcF,GAAd;IACAD,KAAK,CAACC,GAAG,CAACG,OAAL,CAAL;IACA,OAAO,KAAP;EACD;AACF,CAlBD;;AAoBA,SACE3B,IADF,EAEE;AACAK,yBAHF,EAIEyB,4BAJF"},"metadata":{},"sourceType":"module"}